expd_t_root_meets_basic_requirements_to_become_tributary_of_from_by_decision = {
	
	ROOT = {
		
		# Prettification
		show_scope_change = no
		
		# Must be independent non-tributary
		independent  = yes
		is_tributary = no
		
		# ROOT must not be at war, or must be primary defender in a war (in the latter case, they can call you instantly after becoming a tributary)
		OR = {
			war = no
			is_primary_war_defender = yes
		}
		
		# The target must vaguely like the decision taker
		opinion = {
			who = FROM
			value >= 0
		}
		
		FROM = { prestige > 0 }
	
	}
	
}

expd_t_from_can_instantly_force_root_to_be_protectorate = {
	
	#Basic requirements must be met
	expd_t_root_meets_basic_requirements_to_become_tributary_of_from_by_decision = yes
	
	# FROM must have somehow obtained ROOT's primary title for them
	ROOT = {
		
		# Prettification
		show_scope_change = no
		
		OR = {
			
			# Debug mode!
			conditional_tooltip = {
				trigger = {
					FROM = { ai = no }
					has_global_flag = expd_t_debug_mode
				}
				custom_tooltip = {
					text = EXPD_T_TOOLTIP_DEBUG_MODE_ENABLED
					always = yes
				}
			}
			
			# Pressed their claim
			has_opinion_modifier = {
				who = FROM
				name = pressed_my_claim
			}
			
			# Crusade beneficiary
			has_opinion_modifier = {
				who = FROM
				name = opinion_beneficiary
			}
			has_opinion_modifier = {
				who = FROM
				name = opinion_granted_crusader_kingdom
			}
			
			# Granted the target their primary title (which either gave them de facto independence, or the decision taker granted independence manually)
			AND = {
				real_tier = DUKE
				OR = {
					has_opinion_modifier = {
						who = FROM
						name = opinion_granted_duchy
					}
					has_opinion_modifier = {
						who = FROM
						name = opinion_granted_duchy_vice_royalty
					}
				}
			}
			AND = {
				real_tier = KING
				OR = {
					has_opinion_modifier = {
						who = FROM
						name = opinion_granted_kingdom
					}
					has_opinion_modifier = {
						who = FROM
						name = opinion_granted_kingdom_vice_royalty
					}
				}
			}
			AND = {
				real_tier = EMPEROR
				OR = {
					has_opinion_modifier = {
						who = FROM
						name = opinion_granted_empire
					}
					has_opinion_modifier = {
						who = FROM
						name = opinion_granted_empire_vice_royalty
					}
				}
			}
		}
	}
	
	# Players can't be forced to be protectorates
	ROOT = { ai = no }
	
}

expd_t_this_character_can_instantly_stop_being_a_protectorate = {
	trigger_if = {
		limit = { has_global_flag = expd_t_debug_mode }
		custom_tooltip = {
			text = { EXPD_T_TOOLTIP_DEBUG_MODE_ENABLED }
			ai = no
		}
	}
	custom_tooltip = {
		text = { EXPD_T_TOOLTIP_PROTECTORATE_OR_SUZERAIN_IS_UNLANDED_OR_NOT_INDEPENDENT }
		OR = {
			
			# If you're not independent or not landed, you don't need a protector (because you have a feudal lord)
			# (This should probably have been cleaned up by however you became a vassal/unlanded... but just in case...)
			independent = no
			is_landed = no
			
			# Suzerain is not independent, or not landed, or is themselves a tributary, or has negative prestige while you have positive prestige.
			suzerain = { independent = no }
			suzerain = { is_landed = no }
			suzerain = { is_tributary = yes }
			
		}
	}
}