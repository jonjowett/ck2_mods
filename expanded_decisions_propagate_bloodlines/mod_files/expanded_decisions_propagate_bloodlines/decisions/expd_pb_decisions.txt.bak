# Targetted decisions are possible vs _all_ other characters and shown are in the Diplomacy View, not the Intrigue View. The taker is in the FROM scope.
#
# filter = [self/court/home_court/vassals/sub_realm/realm/dynasty/all] ('self' MUST be set for decisions targetting only the taker, the other filter types can be set to lessen CPU load)
# ai_target_filter = [self/court/home_court/vassals/sub_realm/realm/dynasty/all] (which characters for which the AI evaluates the decision.)
#	court: all characters in the AI's host court, including prisoners, and characters currently away (wards, prisoners, etc)
#	home_court: all characters in the AI's home court, including prisoners, and characters currently away (wards, prisoners, etc)
#	vassals: direct vassal rulers of the AI's employer
#	sub_realm: all characters below the AI's employer
#	realm: all characters in the same top realm as the AI
#	dynasty: all members of the same dynasty
#	rivals: your rivals plus any character you have an opinion modifier with 'crime = yes' set (the same set of characters the 'is_foe' trigger evaluates)
#	all: all living characters (Avoid if possible. VERY CPU-HEAVY!)
#

targetted_decisions = {
	
	expd_pb_propagate_bloodlines_self = {
		only_playable = yes
		filter = self
		ai_target_filter = none # Will never be checked by AI
		ai_check_interval = 999 # If the AI ever checks it, it will be extremely rarely checked
		
		from_potential = {
			ai = no             # AI cannot take this decision
		}
		
		potential = {
			# Allow any character who has a bloodline to be targeted
			any_owned_bloodline = {
				ROOT = {
					is_bloodline_member_of = PREV
				}
			}
		}
		
		allow = {
			always = yes
		}
		
		effect = {
			
			# Ensure that, if the targeted character has one bloodline from a bloodline founder, then he/she has ALL the bloodlines from that founder
			# This is a quick way to add back bloodlines created by long-lived (usually-player) characters, where an intervening matrimarriage has been dissolved during the multi-bloodline-founder's lifetime.
			any_owned_bloodline = {
				founder = {
					any_owned_bloodline = {
						save_event_target_as = target_bloodline_to_propagate
						if = {
							limit = {
								founder = { character = PREVPREV }
								NOT = { ROOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
							}
							event_target:target_bloodline_to_propagate = { add_bloodline_member = ROOT }
						}
						clear_event_target = target_bloodline_to_propagate
					}
				}
			}
			
			# For every bloodline owned by the targetted character, locate the founder.
			# If the founder created multiple bloodlines, ensure that every character that has one of the founder's bloodlines has ALL of the founder's bloodlines.
			any_owned_bloodline = {
				founder = {
					any_owned_bloodline = {
						save_event_target_as = target_bloodline_to_propagate
						if = {
							limit = { founder = { character = PREVPREV } }
							founder = {
								any_owned_bloodline = {
									if = {
										limit = { founder = { character = PREVPREV } }
										any_bloodline_member_including_dead = {
											if = {
												limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
												event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
											}
										}
									}
								}
							}
						}
						clear_event_target = target_bloodline_to_propagate
					}
				}
			}
			
			# Propagate all owned bloodlines 10 generations from their founder
			any_owned_bloodline = {
				save_event_target_as = target_bloodline_to_propagate
				founder = {
					any_child_even_if_dead = {
						if = {
							limit = {
								# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
								# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
								OR = {
									PREV = { is_female = no }
									dynasty = PREV
								}
							}
							if = {
								limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
								event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
							}
							any_child_even_if_dead = {
								if = {
									limit = {
										# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
										# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
										OR = {
											PREV = { is_female = no }
											dynasty = PREV
										}
									}
									if = {
										limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
										event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
									}
									any_child_even_if_dead = {
										if = {
											limit = {
												# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
												# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
												OR = {
													PREV = { is_female = no }
													dynasty = PREV
												}
											}
											if = {
												limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
												event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
											}
											any_child_even_if_dead = {
												if = {
													limit = {
														# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
														# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
														OR = {
															PREV = { is_female = no }
															dynasty = PREV
														}
													}
													if = {
														limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
														event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
													}
													any_child_even_if_dead = {
														if = {
															limit = {
																# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																OR = {
																	PREV = { is_female = no }
																	dynasty = PREV
																}
															}
															if = {
																limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
															}
															any_child_even_if_dead = {
																if = {
																	limit = {
																		# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																		# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																		OR = {
																			PREV = { is_female = no }
																			dynasty = PREV
																		}
																	}
																	if = {
																		limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																		event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																	}
																	any_child_even_if_dead = {
																		if = {
																			limit = {
																				# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																				# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																				OR = {
																					PREV = { is_female = no }
																					dynasty = PREV
																				}
																			}
																			if = {
																				limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																				event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																			}
																			any_child_even_if_dead = {
																				if = {
																					limit = {
																						# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																						# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																						OR = {
																							PREV = { is_female = no }
																							dynasty = PREV
																						}
																					}
																					if = {
																						limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																						event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																					}
																					any_child_even_if_dead = {
																						if = {
																							limit = {
																								# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																								# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																								OR = {
																									PREV = { is_female = no }
																									dynasty = PREV
																								}
																							}
																							if = {
																								limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																								event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																							}
																							any_child_even_if_dead = {
																								if = {
																									limit = {
																										# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																										# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																										OR = {
																											PREV = { is_female = no }
																											dynasty = PREV
																										}
																									}
																									if = {
																										limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																										event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																									}
																								}
																							}
																						}
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
				clear_event_target = target_bloodline_to_propagate
			}
			
			# Propagate all owned bloodlines 10 generations from this character
			any_owned_bloodline = {
				save_event_target_as = target_bloodline_to_propagate
				ROOT = {
					any_child_even_if_dead = {
						if = {
							limit = {
								# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
								# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
								OR = {
									PREV = { is_female = no }
									dynasty = PREV
								}
							}
							if = {
								limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
								event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
							}
							any_child_even_if_dead = {
								if = {
									limit = {
										# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
										# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
										OR = {
											PREV = { is_female = no }
											dynasty = PREV
										}
									}
									if = {
										limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
										event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
									}
									any_child_even_if_dead = {
										if = {
											limit = {
												# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
												# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
												OR = {
													PREV = { is_female = no }
													dynasty = PREV
												}
											}
											if = {
												limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
												event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
											}
											any_child_even_if_dead = {
												if = {
													limit = {
														# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
														# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
														OR = {
															PREV = { is_female = no }
															dynasty = PREV
														}
													}
													if = {
														limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
														event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
													}
													any_child_even_if_dead = {
														if = {
															limit = {
																# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																OR = {
																	PREV = { is_female = no }
																	dynasty = PREV
																}
															}
															if = {
																limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
															}
															any_child_even_if_dead = {
																if = {
																	limit = {
																		# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																		# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																		OR = {
																			PREV = { is_female = no }
																			dynasty = PREV
																		}
																	}
																	if = {
																		limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																		event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																	}
																	any_child_even_if_dead = {
																		if = {
																			limit = {
																				# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																				# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																				OR = {
																					PREV = { is_female = no }
																					dynasty = PREV
																				}
																			}
																			if = {
																				limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																				event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																			}
																			any_child_even_if_dead = {
																				if = {
																					limit = {
																						# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																						# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																						OR = {
																							PREV = { is_female = no }
																							dynasty = PREV
																						}
																					}
																					if = {
																						limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																						event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																					}
																					any_child_even_if_dead = {
																						if = {
																							limit = {
																								# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																								# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																								OR = {
																									PREV = { is_female = no }
																									dynasty = PREV
																								}
																							}
																							if = {
																								limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																								event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																							}
																							any_child_even_if_dead = {
																								if = {
																									limit = {
																										# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																										# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																										OR = {
																											PREV = { is_female = no }
																											dynasty = PREV
																										}
																									}
																									if = {
																										limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																										event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																									}
																								}
																							}
																						}
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
				clear_event_target = target_bloodline_to_propagate
			}
			
		}
	}
	
	#Duplicate of propagate_bloodlines_self, where the only difference is the "filter" ( ="self" above, ="all" here)
	expd_pb_propagate_bloodlines_other = {
		only_playable = yes
		filter = all
		ai_target_filter = none # Will never be checked by AI
		ai_check_interval = 999 # If the AI ever checks it, it will be extremely rarely checked
		
		from_potential = {
			ai = no             # AI cannot take this decision
		}
		
		potential = {
			# Allow any character who has a bloodline to be targeted
			any_owned_bloodline = {
				ROOT = {
					is_bloodline_member_of = PREV
				}
			}
		}
		
		allow = {
			always = yes
		}
		
		effect = {
			
			# Ensure that, if the targeted character has one bloodline from a bloodline founder, then he/she has ALL the bloodlines from that founder
			# This is a quick way to add back bloodlines created by long-lived (usually-player) characters, where an intervening matrimarriage has been dissolved during the multi-bloodline-founder's lifetime.
			any_owned_bloodline = {
				founder = {
					any_owned_bloodline = {
						save_event_target_as = target_bloodline_to_propagate
						if = {
							limit = {
								founder = { character = PREVPREV }
								NOT = { ROOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate }}
							}
							event_target:target_bloodline_to_propagate = { add_bloodline_member = ROOT }
						}
						clear_event_target = target_bloodline_to_propagate
					}
				}
			}
			
			# For every bloodline owned by the targetted character, locate the founder.
			# If the founder created multiple bloodlines, ensure that every character that has one of the founder's bloodlines has ALL of the founder's bloodlines.
			any_owned_bloodline = {
				founder = {
					any_owned_bloodline = {
						save_event_target_as = target_bloodline_to_propagate
						if = {
							limit = { founder = { character = PREVPREV } }
							founder = {
								any_owned_bloodline = {
									if = {
										limit = { founder = { character = PREVPREV } }
										any_bloodline_member_including_dead = {
											if = {
												limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
												event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
											}
										}
									}
								}
							}
						}
						clear_event_target = target_bloodline_to_propagate
					}
				}
			}
			
			# Propagate all owned bloodlines 10 generations from their founder
			any_owned_bloodline = {
				save_event_target_as = target_bloodline_to_propagate
				founder = {
					any_child_even_if_dead = {
						if = {
							limit = {
								# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
								# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
								OR = {
									PREV = { is_female = no }
									dynasty = PREV
								}
							}
							if = {
								limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
								event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
							}
							any_child_even_if_dead = {
								if = {
									limit = {
										# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
										# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
										OR = {
											PREV = { is_female = no }
											dynasty = PREV
										}
									}
									if = {
										limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
										event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
									}
									any_child_even_if_dead = {
										if = {
											limit = {
												# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
												# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
												OR = {
													PREV = { is_female = no }
													dynasty = PREV
												}
											}
											if = {
												limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
												event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
											}
											any_child_even_if_dead = {
												if = {
													limit = {
														# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
														# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
														OR = {
															PREV = { is_female = no }
															dynasty = PREV
														}
													}
													if = {
														limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
														event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
													}
													any_child_even_if_dead = {
														if = {
															limit = {
																# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																OR = {
																	PREV = { is_female = no }
																	dynasty = PREV
																}
															}
															if = {
																limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
															}
															any_child_even_if_dead = {
																if = {
																	limit = {
																		# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																		# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																		OR = {
																			PREV = { is_female = no }
																			dynasty = PREV
																		}
																	}
																	if = {
																		limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																		event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																	}
																	any_child_even_if_dead = {
																		if = {
																			limit = {
																				# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																				# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																				OR = {
																					PREV = { is_female = no }
																					dynasty = PREV
																				}
																			}
																			if = {
																				limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																				event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																			}
																			any_child_even_if_dead = {
																				if = {
																					limit = {
																						# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																						# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																						OR = {
																							PREV = { is_female = no }
																							dynasty = PREV
																						}
																					}
																					if = {
																						limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																						event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																					}
																					any_child_even_if_dead = {
																						if = {
																							limit = {
																								# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																								# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																								OR = {
																									PREV = { is_female = no }
																									dynasty = PREV
																								}
																							}
																							if = {
																								limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																								event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																							}
																							any_child_even_if_dead = {
																								if = {
																									limit = {
																										# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																										# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																										OR = {
																											PREV = { is_female = no }
																											dynasty = PREV
																										}
																									}
																									if = {
																										limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																										event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																									}
																								}
																							}
																						}
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
				clear_event_target = target_bloodline_to_propagate
			}
			
			# Propagate all owned bloodlines 10 generations from this character
			any_owned_bloodline = {
				save_event_target_as = target_bloodline_to_propagate
				ROOT = {
					any_child_even_if_dead = {
						if = {
							limit = {
								# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
								# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
								OR = {
									PREV = { is_female = no }
									dynasty = PREV
								}
							}
							if = {
								limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
								event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
							}
							any_child_even_if_dead = {
								if = {
									limit = {
										# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
										# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
										OR = {
											PREV = { is_female = no }
											dynasty = PREV
										}
									}
									if = {
										limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
										event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
									}
									any_child_even_if_dead = {
										if = {
											limit = {
												# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
												# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
												OR = {
													PREV = { is_female = no }
													dynasty = PREV
												}
											}
											if = {
												limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
												event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
											}
											any_child_even_if_dead = {
												if = {
													limit = {
														# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
														# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
														OR = {
															PREV = { is_female = no }
															dynasty = PREV
														}
													}
													if = {
														limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
														event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
													}
													any_child_even_if_dead = {
														if = {
															limit = {
																# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																OR = {
																	PREV = { is_female = no }
																	dynasty = PREV
																}
															}
															if = {
																limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
															}
															any_child_even_if_dead = {
																if = {
																	limit = {
																		# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																		# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																		OR = {
																			PREV = { is_female = no }
																			dynasty = PREV
																		}
																	}
																	if = {
																		limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																		event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																	}
																	any_child_even_if_dead = {
																		if = {
																			limit = {
																				# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																				# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																				OR = {
																					PREV = { is_female = no }
																					dynasty = PREV
																				}
																			}
																			if = {
																				limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																				event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																			}
																			any_child_even_if_dead = {
																				if = {
																					limit = {
																						# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																						# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																						OR = {
																							PREV = { is_female = no }
																							dynasty = PREV
																						}
																					}
																					if = {
																						limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																						event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																					}
																					any_child_even_if_dead = {
																						if = {
																							limit = {
																								# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																								# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																								OR = {
																									PREV = { is_female = no }
																									dynasty = PREV
																								}
																							}
																							if = {
																								limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																								event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																							}
																							any_child_even_if_dead = {
																								if = {
																									limit = {
																										# Always propagate from male bloodline owners to their children (because 99.9% of bloodlines are patrilineal)
																										# Only propagate from female bloodline owners to children of the same dynasty (ie: assume women only have children of the same dynasty via a matrilineal marriage)
																										OR = {
																											PREV = { is_female = no }
																											dynasty = PREV
																										}
																									}
																									if = {
																										limit = { NOT = { is_bloodline_member_of = event_target:target_bloodline_to_propagate } }
																										event_target:target_bloodline_to_propagate = { add_bloodline_member = PREV }
																									}
																								}
																							}
																						}
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
				clear_event_target = target_bloodline_to_propagate
			}
			
		}
	}
}